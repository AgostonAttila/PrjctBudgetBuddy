@page "/register";
@layout FullScreenLayout

@inject IAccountService AccountService
@inject NavigationManager NavigationManager

@using blazorapp.Models.DTO;
@using blazorapp.Services.Account;

<h3 class="card-header">Register</h3>
<div class="card-body">
	<form class="form-group">
		<div class="row">
			<div class="mb-3 col-2">
				<label class="form-label">Title</label>
				<select formControlName="title" class="form-select">
					<option value=""></option>
					<option value="Mr">Mr</option>
					<option value="Mrs">Mrs</option>
					<option value="Miss">Miss</option>
					<option value="Ms">Ms</option>
				</select>			
			</div>
			<div class="mb-3 col-5">
				<label class="form-label">First Name</label>
				<input type="text" formControlName="firstName" class="form-control" />				
			</div>
			<div class="mb-3 col-5">
				<label class="form-label">Last Name</label>
				<input type="text" formControlName="lastName" class="form-control"/>				
			</div>
		</div>
		<div class="mb-3">
			<label class="form-label">Email</label>
			<input type="text" @bind-value="registerDTO.Username" formControlName="email" class="form-control" />
		</div>
		<div class="row">
			<div class="mb-3 col">
				<label class="form-label">Password</label>
				<input type="password" @bind-value="registerDTO.Password" formControlName="password" class="form-control" />
			</div>
			<div class="mb-3 col">
				<label class="form-label">Confirm Password</label>
				<input type="password" formControlName="confirmPassword" class="form-control" />				
			</div>
		</div>
		<div class="mb-3 form-check">
			<input type="checkbox" formControlName="acceptTerms" id="acceptTerms" class="form-check-input" />
			<label for="acceptTerms" class="form-check-label">Accept Terms & Conditions</label>			
		</div>
		<div class="mb-3">		
			<button type="button" class="btn btn-primary" @onclick=@(() => HandleRegistration())>Register</button>
			<NavLink class="nav-link btn btn-link pe-0" href="login">Cancel</NavLink>		
		</div>
	</form>
</div>

@code {

	RegisterDTO registerDTO = new RegisterDTO();

	protected override void OnInitialized()
	{

	}

	async Task HandleRegistration()
	{	
		var result = await AccountService.Register(registerDTO);
	}

}
